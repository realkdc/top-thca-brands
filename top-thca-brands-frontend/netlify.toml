[build]
  command = "npm install && npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "18"

# Serve static HTML for retention calculator route (for crawlers with proper meta tags)
# Browsers will see the React app loaded in the static HTML
# This must come BEFORE the catch-all redirect
[[redirects]]
  from = "/resources/retention-calculator"
  to = "/resources/retention-calculator.html"
  status = 200
  force = false

# Fallback: serve SPA for all other routes
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200